{"meta":{"title":"Chronus Universe","subtitle":"","description":"","author":"Chronus","url":"http://chronus.cc","root":"/"},"posts":[{"tags":[{"name":"Android","slug":"Android","permalink":"http://chronus.cc/tags/Android/"},{"name":"NDK","slug":"NDK","permalink":"http://chronus.cc/tags/NDK/"}],"title":"Boost库在Android NDK环境内的编译","date":"2021/06/30","text":"在常用的库依赖中，例如opencv，glog等，由于这项目都是通过CMakeLists.txt 完成编译，只需要简单的指定NDK的编译器，使用如下的编译指令就可以完成项目的编译，生成所需要的库文件。 cd &lt;project&gt;mkdir build &amp;&amp; cd buildcmake \\ -DCMAKE_TOOLCHAIN_FILE=$NDK/build/cmake/android.toolchain.cmake \\ -DANDROID_ABI=arm64-v8a \\ -DANDROID_NATIVE_API_LEVEL=android-23 \\ -DANDROID_STL=c++_shared \\ .. 但是，与上述项目不同，Boost使用的编译工具主要是自带的bootstrap.sh，需要的编译过程则会更加复杂，在这里以1.65.0版本的Boost为例，详细介绍一下如何在Ubuntu环境内交叉编译获得32位以及64位的Boost库文件。 首先，我们需要通过Boost官方页面下载指定版本的压缩包，这里需要注意的是，因为压缩包和Github上的Boost仓库并不一致，不要下载Boost仓库并切换分支。下载完成后我们将下载的压缩包解压并切换至解压文件夹。 之后我们需要产生编译Boost所需要的toolchain文件，我们需要指定好NDK的路径，确认该变量在系统中可用，指令echo $NDK可以正常运行。然后，我们使用下面脚本完成工具链的生成。 toolchain=$PWD/toolchain# arm64-v8a$NDK/build/tools/make-standalone-toolchain.sh \\ --arch=arm64 --platform=android-23 \\ --install-dir=\"$toolchain\" \\ --toolchain=aarch64-linux-android-clang \\ --use-llvm --stl=c++_shared# armeabi-v7a$NDK/build/tools/make-standalone-toolchain.sh \\ --arch=arm --platform=android-23 \\ --install-dir=\"$toolchain\" \\ --toolchain=armeabi-linux-android-clang \\ --use-llvm --stl=c++_shared 第三步，我们需要生成编译所需要的user-config.jam文件，执行如下指令： user_config=tools/build/src/user-config.jamrm -f $user_config# arm64-v8acat &lt;&lt;EOF &gt; $user_configimport os ;using clang : android:\"$toolchain/bin/clang++\":&lt;archiver&gt;$toolchain/bin/aarch64-linux-android-ar&lt;ranlib&gt;$toolchain/bin/aarch64-linux-android-ranlib;EOF# armeabi-v7acat &lt;&lt;EOF &gt; $user_configimport os ;using clang : android:\"$toolchain/bin/clang++\":&lt;archiver&gt;$toolchain/bin/arm-linux-androideabi-ar&lt;ranlib&gt;$toolchain/bin/arm-linux-androideabi-ranlib;EOF 最后，执行常规的bootstrap.sh以及b2便可以编译生成库文件，在此过程中，我们可以指定编译库的安装路径。由于我们编译获得的是安卓上的库文件，强烈不建议安装到系统/usr/local路径下，我们可以直接编辑bootstrap.sh文件中的PREFIX变量为PWD/install。 ./bootstrap.sh --with-toolset=clang./b2 -j32 \\ --with-atomic \\ --with-chrono \\ --with-container \\ --with-date_time \\ --with-exception \\ --with-filesystem \\ --with-iostreams \\ --with-locale \\ --with-log \\ --with-program_options \\ --with-random \\ --with-regex \\ --with-serialization \\ --with-system \\ --with-test \\ --with-thread \\ --with-timer \\ --address-model=32 \\ toolset=clang-android \\ architecture=arm \\ # arm64 for arm64-v8a variant=release \\ --layout=versioned \\ target-os=android \\ threading=multi \\ threadapi=pthread \\ link=shared \\ runtime-link=shared \\ install 最后我们可以在当前路径下的install文件夹内找到所有的库文件和头文件并在安卓工程中使用它们。","permalink":"http://chronus.cc/2021/06/30/build-boost-for-android-ndk/","photos":[]},{"tags":[{"name":"Linux","slug":"Linux","permalink":"http://chronus.cc/tags/Linux/"},{"name":"Hexo","slug":"Hexo","permalink":"http://chronus.cc/tags/Hexo/"}],"title":"Hexo网页搭建：打开本地端口与局域网展示","date":"2021/06/29","text":"在完成Hexo网页后，我们通常可以执行如下步骤，完成网页在本地端的预览： hexo cleanhexo ghexo s 随后便可以在任意浏览器打开http://localhost:4000/预览已经生成的网页。除此之外，我们还希望把生成的主页分享给一起的伙伴，这就需要我们将本地的端口开放给局域网使用。我们也借这个机会复习一下Linux中常用的网络指令。 # 列出所有的套接字接口# l - listening# n - with port number# t - tcp# u - udpnetstat -lntu# 尝试寻找端口号netstat -na | grep :4000# 如果有使用ubuntu firewallsudo ufw allow 4000 在上述的命令行，当使用ubuntu firewall时，ufw会管理所有的端口和连接，用来替换旧版本的iptables防火墙。而针对其他版本的Linux，可以使用如下两个指令： # centos &amp; redhatfirewall-cmd --add-port=4000/tcp# iptable # A - append添加新的规则# p - protocal协议使用TCP# --dport - 端口使用400# j - jump跳转规则为ACCEPT接受iptables -A INPUT -p tcp --dport 4000 -j ACCEPT# 重启iptablessudo systemctl restart iptables 最后通过ifconfig获得局域网ip后便可以通过ip:4000在其他的局域网主机上访问刚刚搭建的网页。","permalink":"http://chronus.cc/2021/06/29/open-local-port-to-network/","photos":[]},{"tags":[],"title":"Hello World","date":"2021/06/29","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new \"My New Post\" More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment Highlightalert('Hello World!');","permalink":"http://chronus.cc/2021/06/29/hello-world/","photos":[]}],"categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"http://chronus.cc/tags/Android/"},{"name":"NDK","slug":"NDK","permalink":"http://chronus.cc/tags/NDK/"},{"name":"Linux","slug":"Linux","permalink":"http://chronus.cc/tags/Linux/"},{"name":"Hexo","slug":"Hexo","permalink":"http://chronus.cc/tags/Hexo/"}]}